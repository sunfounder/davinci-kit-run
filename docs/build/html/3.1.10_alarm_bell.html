

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.10 Alarmglocke &mdash; SunFounder Da Vinci Kit  Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="3.1.11 Morsekode-Generator" href="3.1.11_morse_code_generator.html" />
    <link rel="prev" title="3.1.9 Passwortsperre" href="3.1.9_password_lock.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Da Vinci Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="component_list.html">Komponentenliste</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Einführung</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_do_we_need.html">Was brauchen wir?</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparation.html">Vorbereitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Bibliotheken</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio_extension_board.html">GPIO-Erweiterungskarte</a></li>
<li class="toctree-l1"><a class="reference internal" href="download_the_code.html">Laden Sie die Kode herunter</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_output.html">1 Ausgabe</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_input.html">2 Eingabe</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="3_extension.html">3 Erweiterung</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.1.1_counting_device.html">3.1.1 Zählgerät</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.2_welcome.html">3.1.2 Willkommen</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.3_reversing_alarm.html">3.1.3 Alarm umkehren</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.4_smart_fan.html">3.1.4 Smart Fan</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.5_battery_indicator.html">3.1.5 Batterieanzeige</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.6_motion_control.html">3.1.6 Bewegungssteuerung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.7_traffic_light.html">3.1.7 Ampel</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.8_overheat_monitor.html">3.1.8 Überhitzungsmonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.9_password_lock.html">3.1.9 Passwortsperre</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1.10 Alarmglocke</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction"><strong>Einführung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#components"><strong>Komponenten</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#schematic-diagram"><strong>Schematische Darstellung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#experimental-procedures"><strong>Experimentelle Verfahren</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-c-language-users"><strong>Für Benutzer in C-Sprache</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-python-language-users"><strong>Für Python-Sprachbenutzer</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#phenomenon-picture"><strong>Phänomen Bild</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="3.1.11_morse_code_generator.html">3.1.11 Morsekode-Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.12_game_guess_number.html">3.1.12 SPIEL – Nummer Vermutung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.13_game_10_second.html">3.1.13 SPIEL - 10 Sekunden</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.14_game_not_not.html">3.1.14 SPIEL - Nicht nicht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Anhang</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Da Vinci Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="3_extension.html">3 Erweiterung</a> &raquo;</li>
        
      <li>3.1.10 Alarmglocke</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/3.1.10_alarm_bell.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="alarm-bell">
<h1>3.1.10 Alarmglocke<a class="headerlink" href="#alarm-bell" title="Link zu dieser Überschrift">¶</a></h1>
<section id="introduction">
<h2><strong>Einführung</strong><a class="headerlink" href="#introduction" title="Link zu dieser Überschrift">¶</a></h2>
<p>In diesem Kurs erstellen wir ein manuelles Alarmgerät. Sie können den Kippschalter durch einen Thermistor oder einen lichtempfindlichen Sensor ersetzen, um einen Temperaturalarm oder einen Lichtalarm auszulösen.</p>
</section>
<section id="components">
<h2><strong>Komponenten</strong><a class="headerlink" href="#components" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/list_Alarm_Bell.png" class="align-center" src="_images/list_Alarm_Bell.png" />
</section>
<section id="schematic-diagram">
<h2><strong>Schematische Darstellung</strong><a class="headerlink" href="#schematic-diagram" title="Link zu dieser Überschrift">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>T-Karte Name</p></td>
<td><p>physisch</p></td>
<td><p>wiringPi</p></td>
<td><p>BCM</p></td>
</tr>
<tr class="row-even"><td><p>GPIO17</p></td>
<td><p>Pin 11</p></td>
<td><p>0</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO18</p></td>
<td><p>Pin 12</p></td>
<td><p>1</p></td>
<td><p>18</p></td>
</tr>
<tr class="row-even"><td><p>GPIO27</p></td>
<td><p>Pin 13</p></td>
<td><p>2</p></td>
<td><p>27</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO22</p></td>
<td><p>Pin 15</p></td>
<td><p>3</p></td>
<td><p>22</p></td>
</tr>
</tbody>
</table>
<img alt="_images/Schematic_three_one10.png" class="align-center" src="_images/Schematic_three_one10.png" />
</section>
<section id="experimental-procedures">
<h2><strong>Experimentelle Verfahren</strong><a class="headerlink" href="#experimental-procedures" title="Link zu dieser Überschrift">¶</a></h2>
<p><strong>Schritt 1:</strong> Bauen Sie die Schaltung auf.</p>
<a class="reference internal image-reference" href="_images/image266.png"><img alt="Alarm Bell_bb" src="_images/image266.png" style="width: 6.64861in; height: 3.61458in;" /></a>
<section id="for-c-language-users">
<h3><strong>Für Benutzer in C-Sprache</strong><a class="headerlink" href="#for-c-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 2:</strong> Verzeichnis wechseln.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="mf">3.1</span><span class="o">.</span><span class="mi">10</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 3:</strong> Kompilieren.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">10</span><span class="n">_AlarmBell</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">lwiringPi</span> <span class="o">-</span><span class="n">lpthread</span>
</pre></div>
</div>
<p><strong>Schritt 4:</strong> Ausführen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Nach dem Start des Programms wird der Kippschalter nach rechts umgeschaltet und der Summer gibt Alarmtöne aus. Gleichzeitig blinken die roten und grünen LEDs mit einer bestimmten Frequenz.</p>
<p><strong>Kode Erklärung</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;pthread.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p>In dieser Kode verwenden Sie eine neue Bibliothek, pthread.h, die aus einer Reihe allgemeiner Thread-Bibliotheken besteht und Multithreading realisieren kann. Wir fügen den Parameter <strong>-lpthread</strong> zur Kompilierungszeit hinzu, damit die LED und der Summer unabhängig voneinander arbeiten können.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="o">*</span><span class="nf">ledWork</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">){</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
            <span class="n">pthread_exit</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ALedPin</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ALedPin</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">BLedPin</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">BLedPin</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Die Funktion ledWork() hilft beim Einstellen des Arbeitszustands dieser beiden LEDs: Sie leuchtet die grüne LED 0,5 Sekunden lang auf und erlischt dann. In ähnlicher Weise leuchtet die rote LED 0,5 Sekunden lang auf und erlischt dann.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="o">*</span><span class="nf">buzzWork</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">){</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
            <span class="n">pthread_exit</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">((</span><span class="n">note</span><span class="o">&gt;=</span><span class="mi">800</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="n">note</span><span class="o">&lt;=</span><span class="mi">130</span><span class="p">)){</span>
            <span class="n">pitch</span> <span class="o">=</span> <span class="o">-</span><span class="n">pitch</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">note</span><span class="o">=</span><span class="n">note</span><span class="o">+</span><span class="n">pitch</span><span class="p">;</span>
        <span class="n">softToneWrite</span><span class="p">(</span><span class="n">BeepPin</span><span class="p">,</span><span class="n">note</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Mit der Funktion summWork() wird der Arbeitszustand des Summers eingestellt. Hier stellen wir die Frequenz zwischen 130 und 800 ein, um sie in einem Intervall von 20 zu akkumulieren oder abzunehmen.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">on</span><span class="p">(){</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">softToneCreate</span><span class="p">(</span><span class="n">BeepPin</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;setup softTone failed !&quot;</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">pthread_t</span> <span class="n">tLed</span><span class="p">;</span>
    <span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tLed</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">ledWork</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
    <span class="n">pthread_t</span> <span class="n">tBuzz</span><span class="p">;</span>
    <span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tBuzz</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">buzzWork</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In der Funktion on ():</p>
<ol class="arabic simple">
<li><p>Definieren Sie die Markierung „flag = 1“, die das Ende des Kontrollthreads angibt.</p></li>
<li><p>Erstellen Sie einen softwaregesteuerten Ton-Pin <strong>BeepPin</strong>.</p></li>
<li><p>Erstellen Sie zwei separate Threads, damit die LED und der Summer gleichzeitig arbeiten können.</p></li>
</ol>
<p><strong>pthread_t tLed:</strong> Deklariert einen Thread <strong>tLed</strong>.</p>
<p><strong>pthread_create(&amp;tLed,NULL,ledWork,NULL):</strong> Erstellen Sie den Thread und sein Prototyp lautet wie folgt:</p>
<p>int pthread_create (pthread_t * tidp einschränken, const pthread_attr_t * einschränken_attr, void * （* start_rtn) (void <a href="#id1"><span class="problematic" id="id2">*</span></a>), void * arg einschränken);</p>
<p><strong>Geben Sie den Wert zurück</strong></p>
<p>Wenn dies erfolgreich ist, geben Sie “<strong>0</strong>” zurück. Andernfalls geben Sie <strong>die Fallzahl</strong> “<strong>-1</strong>” zurück.</p>
<p><strong>Parameter</strong></p>
<div class="line-block">
<div class="line">Der erste Parameter ist ein Zeiger auf die Thread-ID.</div>
<div class="line">Der zweite wird verwendet, um das Thread-Attribut festzulegen.</div>
<div class="line">Die dritte ist die Startadresse der Thread-Running-Funktion.</div>
<div class="line">Der letzte ist derjenige, der die Funktion ausführt.</div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">off</span><span class="p">(){</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">softToneStop</span><span class="p">(</span><span class="n">BeepPin</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ALedPin</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">BLedPin</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Die Funktion Off() definiert „flag=0“, um die Threads <strong>ledWork</strong> und <strong>BuzzWork</strong> zu verlassen und dann den Summer und die LED auszuschalten.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">setup</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">lastState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">currentState</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">switchPin</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">currentState</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">lastState</span><span class="o">==</span><span class="mi">0</span><span class="p">)){</span>
            <span class="n">on</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">((</span><span class="n">currentState</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">lastState</span><span class="o">==</span><span class="mi">1</span><span class="p">)){</span>
            <span class="n">off</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">lastState</span><span class="o">=</span><span class="n">currentState</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Main() enthält den gesamten Prozess des Programms: Lesen Sie zuerst den Wert des Schiebeschalters; Wenn der Kippschalter nach rechts umgeschaltet ist (der Messwert ist 1), wird die Funktion on () aufgerufen, der Summer wird zur Ausgabe von Tönen angesteuert und die rote und die grüne LED blinken. Andernfalls funktionieren der Summer und die LED nicht.</p>
</section>
<section id="for-python-language-users">
<h3><strong>Für Python-Sprachbenutzer</strong><a class="headerlink" href="#for-python-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 2:</strong> Verzeichnis wechseln.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">python</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 3:</strong> Ausführen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python3</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">10</span><span class="n">_AlarmBell</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Nach dem Start des Programms wird der Kippschalter nach rechts umgeschaltet und der Summer gibt Alarmtöne aus. Gleichzeitig blinken die roten und grünen LEDs mit einer bestimmten Frequenz.</p>
<p><strong>Kode Erklärung</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
</pre></div>
</div>
<p>Hier importieren wir das <strong>Threading</strong>-Modul und es ermöglicht Ihnen, mehrere Dinge gleichzeitig zu tun, während normale Programme Kode nur von oben nach unten ausführen können. Bei <strong>Threading</strong>-Modulen können die LED und der Summer separat arbeiten.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ledWork</span><span class="p">():</span>
    <span class="k">while</span> <span class="n">flag</span><span class="p">:</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">ALedPin</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">ALedPin</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">BLedPin</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">BLedPin</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</pre></div>
</div>
<p>Die Funktion ledWork() hilft beim Einstellen des Arbeitszustands dieser beiden LEDs: Sie leuchtet die grüne LED 0,5 Sekunden lang auf und erlischt dann. In ähnlicher Weise leuchtet die rote LED 0,5 Sekunden lang auf und erlischt dann.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">buzzerWork</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">pitch</span>
    <span class="k">global</span> <span class="n">note</span>
    <span class="k">while</span> <span class="n">flag</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">note</span> <span class="o">&gt;=</span> <span class="mi">800</span> <span class="ow">or</span> <span class="n">note</span> <span class="o">&lt;=</span><span class="mi">130</span><span class="p">:</span>
            <span class="n">pitch</span> <span class="o">=</span> <span class="o">-</span><span class="n">pitch</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">note</span> <span class="o">+</span> <span class="n">pitch</span>
        <span class="n">Buzz</span><span class="o">.</span><span class="n">ChangeFrequency</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
<p>Mit der Funktion summWork() wird der Arbeitszustand des Summers eingestellt. Hier stellen wir die Frequenz zwischen 130 und 800 ein, um sie in einem Intervall von 20 zu akkumulieren oder abzunehmen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">on</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">flag</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">Buzz</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">tBuzz</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">buzzerWork</span><span class="p">)</span>
    <span class="n">tBuzz</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">tLed</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">ledWork</span><span class="p">)</span>
    <span class="n">tLed</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>In der Funktion on ():</p>
<ol class="arabic">
<li><p>Definieren Sie die Markierung „flag = 1“, die das Ende des Kontrollthreads angibt.</p></li>
<li><p>Starten Sie den Buzz und stellen Sie den Arbeitszyklus auf 50% ein.</p></li>
<li><p>Erstellen Sie <a href="#id1"><span class="problematic" id="id2">**</span></a>2 <a href="#id3"><span class="problematic" id="id4">**</span></a>separate Threads, damit die LED und der Summer gleichzeitig arbeiten können.</p>
<p>tBuzz = threading.Thread (target = buzzerWork) <strong>:</strong> Erstellen Sie den Thread und sein Prototyp lautet wie folgt:</p>
</li>
</ol>
<p>class threading.Thread (group=None, target=None, name=None, args=(), kwargs={}, <a href="#id1"><span class="problematic" id="id2">*</span></a>, daemon=None)</p>
<p>Unter den Konstruktionsmethoden ist der Hauptparameter <strong>target</strong>. Wir müssen dem Ziel ein aufrufbares Objekt zuweisen (hier sind die Funktionen <strong>ledWork</strong> und <strong>BuzzWork</strong>).</p>
<p>Next <strong>start()</strong> wird aufgerufen, um das Thread-Objekt zu starten. Beispiel: tBuzz.start () wird verwendet, um den neu installierten tBuzz-Thread zu starten.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">off</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">flag</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Buzz</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">ALedPin</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">BLedPin</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</pre></div>
</div>
<p>Die Funktion Off() definiert „flag=0“, um die Threads <strong>ledWork</strong> und <strong>BuzzWork</strong> zu verlassen und dann den Summer und die LED auszuschalten.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">lastState</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">currentState</span> <span class="o">=</span><span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">switchPin</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">currentState</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">lastState</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">on</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">currentState</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">lastState</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">off</span><span class="p">()</span>
        <span class="n">lastState</span><span class="o">=</span><span class="n">currentState</span>
</pre></div>
</div>
<p>Main() enthält den gesamten Prozess des Programms: Lesen Sie zuerst den Wert des Schiebeschalters; Wenn der Kippschalter nach rechts umgeschaltet ist (der Messwert ist 1), wird die Funktion on () aufgerufen, der Summer wird zur Ausgabe von Tönen angesteuert und die rote und die grüne LED blinken. Andernfalls funktionieren der Summer und die LED nicht.</p>
</section>
</section>
<section id="phenomenon-picture">
<h2><strong>Phänomen Bild</strong><a class="headerlink" href="#phenomenon-picture" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/image267.jpeg" class="align-center" src="_images/image267.jpeg" />
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3.1.11_morse_code_generator.html" class="btn btn-neutral float-right" title="3.1.11 Morsekode-Generator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.1.9_password_lock.html" class="btn btn-neutral float-left" title="3.1.9 Passwortsperre" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, sunfounder

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>