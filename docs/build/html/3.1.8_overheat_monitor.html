

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.8 Überhitzungsmonitor &mdash; SunFounder Da Vinci Kit  Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="3.1.9 Passwortsperre" href="3.1.9_password_lock.html" />
    <link rel="prev" title="3.1.7 Ampel" href="3.1.7_traffic_light.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Da Vinci Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="component_list.html">Komponentenliste</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Einführung</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_do_we_need.html">Was brauchen wir?</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparation.html">Vorbereitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Bibliotheken</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio_extension_board.html">GPIO-Erweiterungskarte</a></li>
<li class="toctree-l1"><a class="reference internal" href="download_the_code.html">Laden Sie die Kode herunter</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_output.html">1 Ausgabe</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_input.html">2 Eingabe</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="3_extension.html">3 Erweiterung</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.1.1_counting_device.html">3.1.1 Zählgerät</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.2_welcome.html">3.1.2 Willkommen</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.3_reversing_alarm.html">3.1.3 Alarm umkehren</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.4_smart_fan.html">3.1.4 Smart Fan</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.5_battery_indicator.html">3.1.5 Batterieanzeige</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.6_motion_control.html">3.1.6 Bewegungssteuerung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.7_traffic_light.html">3.1.7 Ampel</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1.8 Überhitzungsmonitor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction"><strong>Einführung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#components"><strong>Komponenten</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#schematic-diagram">Schematische Darstellung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#experimental-procedures"><strong>Experimentelle Verfahren</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-c-language-users"><strong>Für Benutzer in C-Sprache</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-python-language-users"><strong>Für Python-Sprachbenutzer</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#phenomenon-picture"><strong>Phänomen Bild</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="3.1.9_password_lock.html">3.1.9 Passwortsperre</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.10_alarm_bell.html">3.1.10 Alarmglocke</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.11_morse_code_generator.html">3.1.11 Morsekode-Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.12_game_guess_number.html">3.1.12 SPIEL – Nummer Vermutung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.13_game_10_second.html">3.1.13 SPIEL - 10 Sekunden</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.14_game_not_not.html">3.1.14 SPIEL - Nicht nicht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Anhang</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Da Vinci Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="3_extension.html">3 Erweiterung</a> &raquo;</li>
        
      <li>3.1.8 Überhitzungsmonitor</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/3.1.8_overheat_monitor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="overheat-monitor">
<h1>3.1.8 Überhitzungsmonitor<a class="headerlink" href="#overheat-monitor" title="Link zu dieser Überschrift">¶</a></h1>
<section id="introduction">
<h2><strong>Einführung</strong><a class="headerlink" href="#introduction" title="Link zu dieser Überschrift">¶</a></h2>
<p>Möglicherweise möchten Sie ein Überhitzungsüberwachungsgerät herstellen, das für verschiedene Situationen gilt, z. B. im Werk, wenn wir einen Alarm und das rechtzeitige automatische Ausschalten der Maschine bei Überhitzung des Stromkreises wünschen. In dieser Lektion verwenden wir Thermistor, Joystick, Summer, LED und LCD, um ein intelligentes Temperaturüberwachungsgerät zu erstellen, dessen Schwelle einstellbar ist.</p>
</section>
<section id="components">
<h2><strong>Komponenten</strong><a class="headerlink" href="#components" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/list_Overheat_Monitor.png" class="align-center" src="_images/list_Overheat_Monitor.png" />
<img alt="_images/list_Overheat_Monitor2.png" class="align-center" src="_images/list_Overheat_Monitor2.png" />
</section>
<section id="schematic-diagram">
<h2>Schematische Darstellung<a class="headerlink" href="#schematic-diagram" title="Link zu dieser Überschrift">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>T-Karte Name</p></td>
<td><p>physisch</p></td>
<td><p>wiringPi</p></td>
<td><p>BCM</p></td>
</tr>
<tr class="row-even"><td><p>GPIO17</p></td>
<td><p>Pin 11</p></td>
<td><p>0</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO18</p></td>
<td><p>Pin 12</p></td>
<td><p>1</p></td>
<td><p>18</p></td>
</tr>
<tr class="row-even"><td><p>GPIO27</p></td>
<td><p>Pin 13</p></td>
<td><p>2</p></td>
<td><p>27</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO22</p></td>
<td><p>Pin15</p></td>
<td><p>3</p></td>
<td><p>22</p></td>
</tr>
<tr class="row-even"><td><p>GPIO23</p></td>
<td><p>Pin16</p></td>
<td><p>4</p></td>
<td><p>23</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO24</p></td>
<td><p>Pin18</p></td>
<td><p>5</p></td>
<td><p>24</p></td>
</tr>
<tr class="row-even"><td><p>SDA1</p></td>
<td><p>Pin 3</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SCL1</p></td>
<td><p>Pin 5</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<img alt="_images/Schematic_three_one8.png" class="align-center" src="_images/Schematic_three_one8.png" />
</section>
<section id="experimental-procedures">
<h2><strong>Experimentelle Verfahren</strong><a class="headerlink" href="#experimental-procedures" title="Link zu dieser Überschrift">¶</a></h2>
<p><strong>Schritt 1:</strong> Bauen Sie die Schaltung auf.</p>
<a class="reference internal image-reference" href="_images/image258.png"><img alt="Overheat Monitor_bb" src="_images/image258.png" style="width: 6.80903in; height: 5.17847in;" /></a>
<section id="for-c-language-users">
<h3><strong>Für Benutzer in C-Sprache</strong><a class="headerlink" href="#for-c-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 2:</strong> Gehen Sie zum Ordner der Kode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="mf">3.1</span><span class="o">.</span><span class="mi">8</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 3:</strong> Kompilieren Sie der Kode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">8</span><span class="n">_OverheatMonitor</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">lwiringPi</span>
</pre></div>
</div>
<p><strong>Schritt 4:</strong> Führen Sie die ausführbare Datei aus.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Während die Kode ausgeführt wird, werden die aktuelle Temperatur und der Hochtemperaturschwellenwert <strong>40</strong> auf dem <strong>I2C LCD1602</strong> angezeigt. Wenn die aktuelle Temperatur größer als der Schwellenwert ist, werden der Summer und die LED gestartet, um Sie zu alarmieren.</p>
<p>Der <strong>Joystick</strong> dient zum Drücken, um die Hochtemperaturschwelle anzupassen. Durch Umschalten des <strong>Joystick</strong> in Richtung X-Achse und Y-Achse kann der aktuelle Hochtemperaturschwellenwert angepasst (nach oben oder unten gedreht) werden. Drücken Sie den <strong>Joystick</strong> erneut, um den Schwellenwert auf den Anfangswert zurückzusetzen.</p>
<p><strong>Kode Erklärung</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">get_joystick_value</span><span class="p">(){</span>
    <span class="n">uchar</span> <span class="n">x_val</span><span class="p">;</span>
    <span class="n">uchar</span> <span class="n">y_val</span><span class="p">;</span>
    <span class="n">x_val</span> <span class="o">=</span> <span class="n">get_ADC_Result</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">y_val</span> <span class="o">=</span> <span class="n">get_ADC_Result</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x_val</span> <span class="o">&gt;</span> <span class="mi">200</span><span class="p">){</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x_val</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">){</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">y_val</span> <span class="o">&gt;</span> <span class="mi">200</span><span class="p">){</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">10</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">y_val</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">){</span>
        <span class="k">return</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Diese Funktion liest die Werte von X und Y. Wenn <strong>X&gt; 200</strong> ist, wird “<strong>1</strong>” zurückgegeben. <strong>X&lt;50</strong>, return “<strong>-1</strong>”; <strong>y&gt; 200</strong>, geben Sie “<strong>-10</strong>” zurück, und <strong>y&lt;50</strong>, geben Sie “<strong>10</strong>” zurück.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">upper_tem_setting</span><span class="p">(){</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;Upper Adjust:&quot;</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">change</span> <span class="o">=</span> <span class="n">get_joystick_value</span><span class="p">();</span>
    <span class="n">upperTem</span> <span class="o">=</span> <span class="n">upperTem</span> <span class="o">+</span> <span class="n">change</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
    <span class="n">snprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="n">upperTem</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
  <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
  <span class="n">write</span><span class="p">(</span><span class="n">len</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;             &quot;</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This function is for adjusting the threshold and displaying it on the
I2C LCD1602.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="nf">temperature</span><span class="p">(){</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">temp_value</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">Vr</span><span class="p">,</span> <span class="n">Rt</span><span class="p">,</span> <span class="n">temp</span><span class="p">,</span> <span class="n">cel</span><span class="p">,</span> <span class="n">Fah</span><span class="p">;</span>
    <span class="n">temp_value</span> <span class="o">=</span> <span class="n">get_ADC_Result</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">Vr</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">temp_value</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">;</span>
    <span class="n">Rt</span> <span class="o">=</span> <span class="mi">10000</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">Vr</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">Vr</span><span class="p">));</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(((</span><span class="n">log</span><span class="p">(</span><span class="n">Rt</span><span class="o">/</span><span class="mi">10000</span><span class="p">))</span> <span class="o">/</span> <span class="mi">3950</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mf">273.15</span> <span class="o">+</span> <span class="mi">25</span><span class="p">)));</span>
    <span class="n">cel</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">-</span> <span class="mf">273.15</span><span class="p">;</span>
    <span class="n">Fah</span> <span class="o">=</span> <span class="n">cel</span> <span class="o">*</span> <span class="mf">1.8</span> <span class="o">+</span><span class="mi">32</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">cel</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lesen Sie den Analogwert des <strong>CH0</strong> (Thermistor) von <strong>ADC0834</strong> ab und wandeln Sie ihn dann in einen Temperaturwert um.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">monitoring_temp</span><span class="p">(){</span>
    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
    <span class="kt">double</span> <span class="n">cel</span> <span class="o">=</span> <span class="n">temperature</span><span class="p">();</span>
    <span class="n">snprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="s">&quot;%.2f&quot;</span><span class="p">,</span><span class="n">cel</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;Temp: &quot;</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
    <span class="n">snprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="n">upperTem</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Upper: &quot;</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">cel</span> <span class="o">&gt;=</span> <span class="n">upperTem</span><span class="p">){</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">buzzPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LedPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">cel</span> <span class="o">&lt;</span> <span class="n">upperTem</span><span class="p">){</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">buzzPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LedPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Während die Kode ausgeführt wird, werden die aktuelle Temperatur und der Hochtemperaturschwellenwert <strong>40</strong> auf dem <strong>I2C LCD1602</strong> angezeigt. Wenn die aktuelle Temperatur größer als der Schwellenwert ist, werden der Summer und die LED gestartet, um Sie zu alarmieren.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">setup</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">lastState</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">stage</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">currentState</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">Joy_BtnPin</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">currentState</span><span class="o">==</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">lastState</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="n">stage</span><span class="o">=</span><span class="p">(</span><span class="n">stage</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="p">;</span>
            <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
            <span class="n">lcd_clear</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">lastState</span><span class="o">=</span><span class="n">currentState</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">stage</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span>
            <span class="n">upper_tem_setting</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="n">monitoring_temp</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Die Funktion main () enthält den gesamten Programmablauf wie folgt:</p>
<ol class="arabic simple">
<li><p>Wenn das Programm startet, ist der Anfangswert der <strong>Stufe</strong> <strong>0</strong>, und die aktuelle Temperatur und der Hochtemperaturschwellenwert <strong>40</strong> werden auf dem <strong>I2C LCD1602</strong> angezeigt. Wenn die aktuelle Temperatur größer als der Schwellenwert ist, werden der Summer und die LED gestartet, um Sie zu alarmieren.</p></li>
<li><p>Drücken Sie den Joystick, und die <strong>Stufe</strong> ist <strong>1</strong>, und Sie können die Hochtemperaturschwelle einstellen. Durch Umschalten des Joysticks in Richtung X-Achse und Y-Achse kann der aktuelle Schwellenwert angepasst (nach oben oder unten gedreht) werden. Drücken Sie den Joystick erneut, um den Schwellenwert auf den Anfangswert zurückzusetzen.</p></li>
</ol>
</section>
<section id="for-python-language-users">
<h3><strong>Für Python-Sprachbenutzer</strong><a class="headerlink" href="#for-python-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 2:</strong> Gehen Sie zum Ordner der Kode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">python</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 3:</strong> Führen Sie die ausführbare Datei aus.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python3</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">8</span><span class="n">_OverheatMonitor</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Während die Kode ausgeführt wird, werden die aktuelle Temperatur und der Hochtemperaturschwellenwert <strong>40</strong> auf dem <strong>I2C LCD1602</strong> angezeigt. Wenn die aktuelle Temperatur größer als der Schwellenwert ist, werden der Summer und die LED gestartet, um Sie zu alarmieren.</p>
<p>Der <strong>Joystick</strong> dient zum Drücken, um die Hochtemperaturschwelle anzupassen. Durch Umschalten des <strong>Joystick</strong> in Richtung X-Achse und Y-Achse kann der aktuelle Hochtemperaturschwellenwert angepasst (nach oben oder unten gedreht) werden. Drücken Sie den <strong>Joystick</strong> erneut, um den Schwellenwert auf den Anfangswert zurückzusetzen.</p>
<p><strong>Kode Erklärung</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_joystick_value</span><span class="p">():</span>
    <span class="n">x_val</span> <span class="o">=</span> <span class="n">ADC0834</span><span class="o">.</span><span class="n">getResult</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">y_val</span> <span class="o">=</span> <span class="n">ADC0834</span><span class="o">.</span><span class="n">getResult</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="n">x_val</span> <span class="o">&gt;</span> <span class="mi">200</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">elif</span><span class="p">(</span><span class="n">x_val</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span><span class="p">(</span><span class="n">y_val</span> <span class="o">&gt;</span> <span class="mi">200</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">10</span>
    <span class="k">elif</span><span class="p">(</span><span class="n">y_val</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">10</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Diese Funktion liest die Werte von X und Y. Wenn <strong>X&gt; 200</strong> ist, wird “<strong>1</strong>” zurückgegeben. <strong>X&lt;50</strong>, return “<strong>-1</strong>”; <strong>y&gt; 200</strong>, geben Sie “<strong>-10</strong>” zurück, und <strong>y&lt;50</strong>, geben Sie “<strong>10</strong>” zurück.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">upper_tem_setting</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">upperTem</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Upper Adjust: &#39;</span><span class="p">)</span>
    <span class="n">change</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">get_joystick_value</span><span class="p">())</span>
    <span class="n">upperTem</span> <span class="o">=</span> <span class="n">upperTem</span> <span class="o">+</span> <span class="n">change</span>
<span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">upperTem</span><span class="p">))</span>
<span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">strUpperTem</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;              &#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is for adjusting the threshold and displaying it on the
I2C LCD1602.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">temperature</span><span class="p">():</span>
    <span class="n">analogVal</span> <span class="o">=</span> <span class="n">ADC0834</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
    <span class="n">Vr</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">analogVal</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span>
    <span class="n">Rt</span> <span class="o">=</span> <span class="mi">10000</span> <span class="o">*</span> <span class="n">Vr</span> <span class="o">/</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="n">Vr</span><span class="p">)</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(((</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Rt</span> <span class="o">/</span> <span class="mi">10000</span><span class="p">))</span> <span class="o">/</span> <span class="mi">3950</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mf">273.15</span><span class="o">+</span><span class="mi">25</span><span class="p">)))</span>
    <span class="n">Cel</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">-</span> <span class="mf">273.15</span>
    <span class="n">Fah</span> <span class="o">=</span> <span class="n">Cel</span> <span class="o">*</span> <span class="mf">1.8</span> <span class="o">+</span> <span class="mi">32</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">Cel</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Lesen Sie den Analogwert des <strong>CH0</strong> (Thermistor) von <strong>ADC0834</strong> ab und wandeln Sie ihn dann in einen Temperaturwert um.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">monitoring_temp</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">upperTem</span>
    <span class="n">Cel</span><span class="o">=</span><span class="n">temperature</span><span class="p">()</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Temp: &#39;</span><span class="p">)</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Upper: &#39;</span><span class="p">)</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">Cel</span><span class="p">))</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">upperTem</span><span class="p">))</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">Cel</span> <span class="o">&gt;=</span> <span class="n">upperTem</span><span class="p">:</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">buzzPin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">buzzPin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</pre></div>
</div>
<p>Während die Kode ausgeführt wird, werden die aktuelle Temperatur und der Hochtemperaturschwellenwert <strong>40</strong> auf dem <strong>I2C LCD1602</strong> angezeigt. Wenn die aktuelle Temperatur größer als der Schwellenwert ist, werden der Summer und die LED gestartet, um Sie zu alarmieren.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">loop</span><span class="p">():</span>
    <span class="n">lastState</span><span class="o">=</span><span class="mi">1</span>
    <span class="n">stage</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">currentState</span><span class="o">=</span><span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">Joy_BtnPin</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">currentState</span><span class="o">==</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">lastState</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">stage</span><span class="o">=</span><span class="p">(</span><span class="n">stage</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="n">LCD1602</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">lastState</span><span class="o">=</span><span class="n">currentState</span>
        <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">upper_tem_setting</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">monitoring_temp</span><span class="p">()</span>
</pre></div>
</div>
<p>Die Funktion main () enthält den gesamten Programmablauf wie folgt:</p>
<ol class="arabic simple">
<li><p>Wenn das Programm startet, ist der Anfangswert der <strong>Stufe</strong> <strong>0</strong>, und die aktuelle Temperatur und der Hochtemperaturschwellenwert <strong>40</strong> werden auf dem <strong>I2C LCD1602</strong> angezeigt. Wenn die aktuelle Temperatur größer als der Schwellenwert ist, werden der Summer und die LED gestartet, um Sie zu alarmieren.</p></li>
<li><p>Drücken Sie den Joystick, und die <strong>Stufe</strong> ist <strong>1</strong>, und Sie können die Hochtemperaturschwelle einstellen. Durch Umschalten des Joysticks in Richtung X-Achse und Y-Achse kann der aktuelle Hochtemperaturschwellenwert angepasst (nach oben oder unten gedreht) werden. Drücken Sie den Joystick erneut, um den Schwellenwert auf den Anfangswert zurückzusetzen.</p></li>
</ol>
</section>
</section>
<section id="phenomenon-picture">
<h2><strong>Phänomen Bild</strong><a class="headerlink" href="#phenomenon-picture" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/image259.jpeg" class="align-center" src="_images/image259.jpeg" />
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3.1.9_password_lock.html" class="btn btn-neutral float-right" title="3.1.9 Passwortsperre" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.1.7_traffic_light.html" class="btn btn-neutral float-left" title="3.1.7 Ampel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, sunfounder

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>