

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.14 SPIEL - Nicht nicht &mdash; SunFounder Da Vinci Kit  Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="Anhang" href="appendix.html" />
    <link rel="prev" title="3.1.13 SPIEL - 10 Sekunden" href="3.1.13_game_10_second.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Da Vinci Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="component_list.html">Komponentenliste</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Einführung</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_do_we_need.html">Was brauchen wir?</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparation.html">Vorbereitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Bibliotheken</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio_extension_board.html">GPIO-Erweiterungskarte</a></li>
<li class="toctree-l1"><a class="reference internal" href="download_the_code.html">Laden Sie die Kode herunter</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_output.html">1 Ausgabe</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_input.html">2 Eingabe</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="3_extension.html">3 Erweiterung</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.1.1_counting_device.html">3.1.1 Zählgerät</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.2_welcome.html">3.1.2 Willkommen</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.3_reversing_alarm.html">3.1.3 Alarm umkehren</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.4_smart_fan.html">3.1.4 Smart Fan</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.5_battery_indicator.html">3.1.5 Batterieanzeige</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.6_motion_control.html">3.1.6 Bewegungssteuerung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.7_traffic_light.html">3.1.7 Ampel</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.8_overheat_monitor.html">3.1.8 Überhitzungsmonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.9_password_lock.html">3.1.9 Passwortsperre</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.10_alarm_bell.html">3.1.10 Alarmglocke</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.11_morse_code_generator.html">3.1.11 Morsekode-Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.12_game_guess_number.html">3.1.12 SPIEL – Nummer Vermutung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.13_game_10_second.html">3.1.13 SPIEL - 10 Sekunden</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1.14 SPIEL - Nicht nicht</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction"><strong>Einführung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#components"><strong>Komponenten</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#schematic-diagram"><strong>Schematische Darstellung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#experimental-procedures"><strong>Experimentelle Verfahren</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-c-language-users"><strong>Für Benutzer in C-Sprache</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-python-language-users"><strong>Für Python-Sprachbenutzer</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#phenomenon-picture"><strong>Phänomen Bild</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Anhang</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Da Vinci Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="3_extension.html">3 Erweiterung</a> &raquo;</li>
        
      <li>3.1.14 SPIEL - Nicht nicht</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/3.1.14_game_not_not.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="game-not-not">
<h1>3.1.14 SPIEL - Nicht nicht<a class="headerlink" href="#game-not-not" title="Link zu dieser Überschrift">¶</a></h1>
<section id="introduction">
<h2><strong>Einführung</strong><a class="headerlink" href="#introduction" title="Link zu dieser Überschrift">¶</a></h2>
<p>In dieser Lektion werden wir ein interessantes Spielgerät herstellen und es „Nicht nicht“ nennen.</p>
<p>Während des Spiels aktualisiert die Punktmatrix einen Pfeil nach dem Zufallsprinzip. Sie müssen die Taste innerhalb einer begrenzten Zeit in die entgegengesetzte Richtung des Pfeils drücken. Wenn die Zeit abgelaufen ist oder wenn die Taste in die gleiche Richtung wie der Pfeil gedrückt wird, sind Sie raus.</p>
<p>Dieses Spiel kann wirklich Ihr umgekehrtes Denken üben, und jetzt sollen wir es versuchen?</p>
</section>
<section id="components">
<h2><strong>Komponenten</strong><a class="headerlink" href="#components" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/list_GAME_Not_Not.png" class="align-center" src="_images/list_GAME_Not_Not.png" />
</section>
<section id="schematic-diagram">
<h2><strong>Schematische Darstellung</strong><a class="headerlink" href="#schematic-diagram" title="Link zu dieser Überschrift">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>T-Karte Name</p></td>
<td><p>physisch</p></td>
<td><p>wiringPi</p></td>
<td><p>BCM</p></td>
</tr>
<tr class="row-even"><td><p>GPIO17</p></td>
<td><p>Pin 11</p></td>
<td><p>0</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO18</p></td>
<td><p>Pin 12</p></td>
<td><p>1</p></td>
<td><p>18</p></td>
</tr>
<tr class="row-even"><td><p>GPIO27</p></td>
<td><p>Pin 13</p></td>
<td><p>2</p></td>
<td><p>27</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO20</p></td>
<td><p>Pin 38</p></td>
<td><p>28</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-even"><td><p>GPIO26</p></td>
<td><p>Pin 37</p></td>
<td><p>25</p></td>
<td><p>26</p></td>
</tr>
</tbody>
</table>
<img alt="_images/Schematic_three_one14.png" class="align-center" src="_images/Schematic_three_one14.png" />
</section>
<section id="experimental-procedures">
<h2><strong>Experimentelle Verfahren</strong><a class="headerlink" href="#experimental-procedures" title="Link zu dieser Überschrift">¶</a></h2>
<p><strong>Schritt 1:</strong> Bauen Sie die Schaltung auf.</p>
<a class="reference internal image-reference" href="_images/image280.png"><img alt="_images/image280.png" class="align-center" src="_images/image280.png" style="width: 500px;" /></a>
<section id="for-c-language-users">
<h3><strong>Für Benutzer in C-Sprache</strong><a class="headerlink" href="#for-c-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 5:</strong> Wechseln Sie in den Kodeordner.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="mf">3.1</span><span class="o">.</span><span class="mi">14</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 6:</strong> Kompilieren.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">14</span><span class="n">_GAME_NotNot</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">lwiringPi</span>
</pre></div>
</div>
<p><strong>Schritt 7:</strong> Ausführen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Nach dem Start des Programms wird ein Pfeil nach links oder rechts in der Punktmatrix nach dem Zufallsprinzip aktualisiert. Sie müssen die Taste innerhalb einer begrenzten Zeit in die entgegengesetzte Richtung des Pfeils drücken. Dann erscheint „**√**&quot; auf der Punktmatrix. Wenn die Zeit abgelaufen ist oder wenn die Taste in die gleiche Richtung wie der Pfeil gedrückt wird, sind Sie ausgeschaltet und die Punktmatrix zeigt „x“ an. Sie können auch 2 neue Schaltflächen hinzufügen oder durch Joystick-Tasten für Auf, Ab, Links und Rechts ersetzen - 4 Richtungen, um die Schwierigkeit des Spiels zu erhöhen.</p>
<p><strong>Kode Erklärung</strong></p>
<p>Basierend auf der <strong>1.1.6 LED-Punktmatrix</strong> werden in dieser Lektion 2 Tasten hinzugefügt, um ein amüsantes Spielgerät zu erstellen. Wenn Sie mit der Punktmatrix nicht sehr vertraut sind, lesen Sie bitte <strong>1.1.6 LED-Punktmatrix</strong>.</p>
<p>Der gesamte Programmprozess ist wie folgt:</p>
<ol class="arabic simple">
<li><p>Wählen Sie zufällig eine Pfeilrichtung und generieren Sie <strong>Timer 1</strong>.</p></li>
<li><p>Zeigen Sie das Pfeilbild auf der Punktmatrix an.</p></li>
<li><p>Beurteilen Sie die Tasteneingabe. Wenn die Taste gedrückt wird oder <strong>Timer 1</strong> daran erinnert, dass die Zeit abgelaufen ist, beginnt die Beurteilung.</p></li>
<li><p>Zeigen Sie das Bild anhand eines Bewertungsergebnisses an. In der Zwischenzeit <strong>Timer 2</strong> generieren.</p></li>
<li><p>Führen Sie <strong>Schritt 1</strong> erneut aus, wenn <strong>Timer 2</strong> daran erinnert, dass die Zeit abgelaufen ist.</p></li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">GLYPH</span><span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">word</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">code</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">GLYPH</span> <span class="n">arrow</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span>
<span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;right&quot;</span><span class="p">,{</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xEF</span><span class="p">,</span><span class="mh">0xDF</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0xDF</span><span class="p">,</span><span class="mh">0xEF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">}},</span>
    <span class="c1">// {&quot;down&quot;,{0xFF,0xEF,0xC7,0xAB,0xEF,0xEF,0xEF,0xFF}},</span>
    <span class="c1">// {&quot;up&quot;,{0xFF,0xEF,0xEF,0xEF,0xAB,0xC7,0xEF,0xFF}},</span>
    <span class="p">{</span><span class="s">&quot;left&quot;</span><span class="p">,{</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xF7</span><span class="p">,</span><span class="mh">0xFB</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0xFB</span><span class="p">,</span><span class="mh">0xF7</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">}}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">GLYPH</span> <span class="n">check</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span>
<span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;wrong&quot;</span><span class="p">,{</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xBB</span><span class="p">,</span><span class="mh">0xD7</span><span class="p">,</span><span class="mh">0xEF</span><span class="p">,</span><span class="mh">0xD7</span><span class="p">,</span><span class="mh">0xBB</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">}},</span>
    <span class="p">{</span><span class="s">&quot;right&quot;</span><span class="p">,{</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xF7</span><span class="p">,</span><span class="mh">0xEB</span><span class="p">,</span><span class="mh">0xDF</span><span class="p">,</span><span class="mh">0xBF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">}}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Die GLYPH-Struktur funktioniert wie ein Wörterbuch: Das <strong>Wort</strong> Attribut entspricht <strong>dem Schlüssel</strong> im Wörterbuch. Das <strong>Kode</strong>-Attribut entspricht dem <strong>Wert</strong>.</p>
<p>Hier wird Kode verwendet, um ein Array für die Punktmatrix zum Anzeigen von Bildern zu speichern (ein 8x8-Bit-Array).</p>
<p>Hier kann der Array-<strong>Pfeil</strong> verwendet werden, um das Pfeilmuster in Aufwärts-, Abwärts-, Links- und Rechtsrichtung auf der LED-Punktmatrix anzuzeigen.</p>
<p>Jetzt werden <strong>unten</strong> und <strong>oben</strong> kommentiert und bei Bedarf auskommentiert.</p>
<p>Die Array-<strong>Prüfung</strong> wird verwendet, um diese beiden Bilder anzuzeigen: ”<strong>×</strong>” und ”<strong>√</strong>”.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="o">*</span><span class="nf">lookup</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">key</span><span class="p">,</span><span class="k">struct</span> <span class="n">GLYPH</span> <span class="o">*</span><span class="n">glyph</span><span class="p">,</span><span class="kt">int</span> <span class="n">length</span><span class="p">){</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">length</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">glyph</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">word</span><span class="p">,</span><span class="n">key</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">glyph</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">code</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Die Funktion <strong>lookup()</strong> funktioniert durch „Überprüfen des Wörterbuchs“. Definieren Sie <strong>einen Schlüssel</strong>, suchen Sie die gleichen Wörter wie der Schlüssel in der Struktur <strong>GLYPH *glyph</strong> und geben Sie die entsprechenden Informationen zurück - “<strong>kode</strong>” des bestimmten Wortes.</p>
<p>Die Funktion <strong>Strcmp()</strong> wird verwendet, um die Identität von zwei Zeichenfolgen <strong>glyph[i].word</strong> und <strong>Schlüssel</strong> zu vergleichen; Wenn die Identität beurteilt wird, geben Sie den <strong>glyph[i].code</strong> zurück (wie gezeigt).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">display</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">glyphCode</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">hc595_in</span><span class="p">(</span><span class="n">glyphCode</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">hc595_in</span><span class="p">(</span><span class="mh">0x80</span><span class="o">&gt;&gt;</span><span class="n">i</span><span class="p">);</span>
        <span class="n">hc595_out</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Zeigen Sie das angegebene Muster in der Punktmatrix an.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">createGlyph</span><span class="p">(){</span>
    <span class="n">srand</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">arrow</span><span class="p">)</span><span class="o">/</span><span class="k">sizeof</span><span class="p">(</span><span class="n">arrow</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
    <span class="n">waypoint</span><span class="o">=</span><span class="n">arrow</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">word</span><span class="p">;</span>
    <span class="n">stage</span><span class="o">=</span><span class="s">&quot;PLAY&quot;</span><span class="p">;</span>
    <span class="n">alarm</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Mit der Funktion <strong>createGlyph()</strong> wird zufällig eine Richtung ausgewählt (das Wortattribut eines Elements im array arrow[]: <strong>“**left</strong>”, “**right**”…). Stellen Sie die Bühne auf „PLAY“ und starten Sie eine 2-Sekunden-Weckerfunktion.</p>
<p><strong>srand(time(NULL)):</strong> Initialisiert zufällige Seeds, die von der Systemuhr stammen.</p>
<p><strong>(sizeof(arrow)/sizeof(arrow[0])):</strong>Ermittelt die Länge des Arrays, das Ergebnis ist 2.</p>
<p><strong>rand()%2:</strong> Der Rest ist <strong>0</strong> oder <strong>1</strong>, erhalten durch Teilen einer generierten Zufallsnummer durch 2**.**</p>
<p><strong>waypoint=arrow[i].word:</strong> Das Ergebnis sollte „rechts“ oder „links“ sein.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">checkPoint</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">inputKey</span><span class="p">){</span>
    <span class="n">alarm</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">inputKey</span><span class="o">==</span><span class="n">waypoint</span><span class="o">||</span><span class="n">inputKey</span><span class="o">==</span><span class="s">&quot;empty&quot;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">waypoint</span><span class="o">=</span><span class="s">&quot;wrong&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="n">waypoint</span><span class="o">=</span><span class="s">&quot;right&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">stage</span><span class="o">=</span><span class="s">&quot;CHECK&quot;</span><span class="p">;</span>
    <span class="n">alarm</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Mit checkPoint() wird die Tasteneingabe überprüft. Wenn die Taste nicht gedrückt wird oder die Taste in die gleiche Richtung wie der Pfeil gedrückt wird, ist das Ergebnis des Wegpunkts falsch und auf der Punktmatrix wird „**x**&quot; angezeigt. Andernfalls ist der Wegpunkt richtig und die Punktmatrix zeigt „**√**&quot; an. Hier ist die <strong>Stufe</strong> <strong>CHECK</strong> und es kann eine 1-Sekunden-Weckerfunktion eingestellt werden.</p>
<p>alarm() wird auch als „Wecker“ bezeichnet, bei dem ein Timer eingestellt werden kann, und sendet <strong>SIGALRM</strong>-Signale an den Fortschritt, wenn die definierte Zeit abgelaufen ist.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">getKey</span><span class="p">(){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">AButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">BButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span><span class="n">checkPoint</span><span class="p">(</span><span class="s">&quot;right&quot;</span><span class="p">);}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">AButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">BButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span><span class="n">checkPoint</span><span class="p">(</span><span class="s">&quot;left&quot;</span><span class="p">);}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>getKey() liest die Zustände dieser beiden Schaltflächen; Wenn die rechte Taste gedrückt wird, ist der Parameter der Funktion checkPoint() <strong>recht**s und wenn die **linke</strong> Taste gedrückt wird, bleibt der Parameter links.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">timer</span><span class="p">(){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">stage</span><span class="o">==</span><span class="s">&quot;PLAY&quot;</span><span class="p">){</span>
        <span class="n">checkPoint</span><span class="p">(</span><span class="s">&quot;empty&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">stage</span><span class="o">==</span><span class="s">&quot;CHECK&quot;</span><span class="p">){</span>
        <span class="n">createGlyph</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Zuvor wurde timer() aufgerufen, wenn die Alarmzeit abgelaufen ist. Im Modus „PLAY“ soll dann checkPoint() aufgerufen werden, um das Ergebnis zu beurteilen. Wenn das Programm auf den Modus „CHECK“ eingestellt ist, sollte die Funktion createGlyph() aufgerufen werden, um neue Muster auszuwählen.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">setup</span><span class="p">();</span>
    <span class="n">signal</span><span class="p">(</span><span class="n">SIGALRM</span><span class="p">,</span><span class="n">timer</span><span class="p">);</span>
    <span class="n">createGlyph</span><span class="p">();</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">code</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">stage</span> <span class="o">==</span> <span class="s">&quot;PLAY&quot;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">code</span><span class="o">=</span><span class="n">lookup</span><span class="p">(</span><span class="n">waypoint</span><span class="p">,</span><span class="n">arrow</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">arrow</span><span class="p">)</span><span class="o">/</span><span class="k">sizeof</span><span class="p">(</span><span class="n">arrow</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
            <span class="n">display</span><span class="p">(</span><span class="n">code</span><span class="p">);</span>
            <span class="n">getKey</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">stage</span> <span class="o">==</span> <span class="s">&quot;CHECK&quot;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">waypoint</span><span class="p">,</span><span class="n">check</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">check</span><span class="p">)</span><span class="o">/</span><span class="k">sizeof</span><span class="p">(</span><span class="n">check</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
            <span class="n">display</span><span class="p">(</span><span class="n">code</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Die Funktionsweise des Funktionssignals (SIGALRM, Timer): Aufruf der Funktion timer(), wenn ein SIGALRM-Signal (vom Weckerfunktionsalarm() erzeugt) empfangen wird.</p>
<p>Wenn das Programm startet, rufen Sie zunächst einmal createGlyph() auf und starten Sie dann die Schleife.</p>
<p>In der Schleife: Im PLAY-Modus zeigt die Punktmatrix Pfeilmuster an und überprüft den Schaltflächenstatus. Im CHECK-Modus wird “<strong>x</strong>” oder “<strong>√</strong>” angezeigt.</p>
</section>
<section id="for-python-language-users">
<h3><strong>Für Python-Sprachbenutzer</strong><a class="headerlink" href="#for-python-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 5:</strong> Gehen Sie in den Kode-Ordner.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">python</span>
</pre></div>
</div>
<p><strong>Schritt 6:</strong> Ausführen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python3</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">14</span><span class="n">_GAME_NotNot</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Nach dem Starten des Programms erscheint auf der Punktmatrix ein Pfeil nach rechts oder links. Sie müssen die Taste innerhalb einer begrenzten Zeit in die entgegengesetzte Richtung des Pfeils drücken. Dann erscheint „**√**&quot; auf der Punktmatrix. Wenn die Zeit abgelaufen ist oder wenn die Taste in die gleiche Richtung wie der Pfeil gedrückt wird, sind Sie ausgeschaltet und die Punktmatrix zeigt „x“ an. Sie können auch 2 neue Schaltflächen hinzufügen oder durch Joystick-Tasten für Auf, Ab, Links und Rechts ersetzen - 4 Richtungen, um die Schwierigkeit des Spiels zu erhöhen.</p>
<p><strong>Kode Erklärung</strong></p>
<p>Basierend auf der <strong>1.1.6 LED-Punktmatrix</strong> werden in dieser Lektion 2 Tasten hinzugefügt, um ein amüsantes Spielgerät zu erstellen. Wenn Sie mit der Punktmatrix nicht sehr vertraut sind, lesen Sie bitte <strong>1.1.6 LED-Punktmatrix</strong>.</p>
<p>Der gesamte Programmprozess ist wie folgt:</p>
<ol class="arabic simple">
<li><p>Wählen Sie zufällig eine Pfeilrichtung und generieren Sie <strong>Timer 1</strong>.</p></li>
<li><p>Zeigen Sie das entsprechende Pfeilbild in der Punktmatrix an.</p></li>
<li><p>Beurteilen Sie die Tasteneingabe. Wenn die Taste gedrückt wird oder <strong>Timer 1</strong> daran erinnert, dass die Zeit abgelaufen ist, beginnt die Beurteilung.</p></li>
<li><p>Zeigen Sie das Bild anhand eines Bewertungsergebnisses an. In der Zwischenzeit <strong>Timer 2</strong> generieren.</p></li>
<li><p>Führen Sie <strong>Schritt 1</strong> erneut aus, wenn <strong>Timer 2</strong> daran erinnert, dass die Zeit abgelaufen ist.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">creatGlyph</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;PLAY&quot;</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">arrow</span><span class="p">[</span><span class="n">waypoint</span><span class="p">])</span>
            <span class="n">getKey</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">stage</span> <span class="o">==</span> <span class="s2">&quot;CHECK&quot;</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">check</span><span class="p">[</span><span class="n">waypoint</span><span class="p">])</span>
</pre></div>
</div>
<p>Main() enthält den gesamten laufenden Prozess.</p>
<p>Wenn das Programm startet, rufen Sie zunächst einmal createGlyph() auf und starten Sie dann die Schleife.</p>
<p>In der Schleife: Im PLAY-Modus zeigt die Punktmatrix Pfeilmuster an und überprüft den Schaltflächenstatus. Im CHECK-Modus wird “<strong>x</strong>” oder “<strong>√</strong>” angezeigt.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arrow</span><span class="o">=</span><span class="p">{</span>
    <span class="c1">#&quot;down&quot; :[0xFF,0xEF,0xC7,0xAB,0xEF,0xEF,0xEF,0xFF],</span>
    <span class="c1">#&quot;up&quot;:[0xFF,0xEF,0xEF,0xEF,0xAB,0xC7,0xEF,0xFF],</span>
    <span class="s2">&quot;right&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xEF</span><span class="p">,</span><span class="mh">0xDF</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0xDF</span><span class="p">,</span><span class="mh">0xEF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">],</span>
    <span class="s2">&quot;left&quot;</span><span class="p">:[</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xF7</span><span class="p">,</span><span class="mh">0xFB</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0xFB</span><span class="p">,</span><span class="mh">0xF7</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">]</span>
<span class="p">}</span>
<span class="n">check</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;wrong&quot;</span><span class="p">:[</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xBB</span><span class="p">,</span><span class="mh">0xD7</span><span class="p">,</span><span class="mh">0xEF</span><span class="p">,</span><span class="mh">0xD7</span><span class="p">,</span><span class="mh">0xBB</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">],</span>
    <span class="s2">&quot;right&quot;</span><span class="p">:[</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xF7</span><span class="p">,</span><span class="mh">0xEB</span><span class="p">,</span><span class="mh">0xDF</span><span class="p">,</span><span class="mh">0xBF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Hier kann der <strong>Wörterbuch</strong> Pfeil verwendet werden, um das Pfeilmuster in Aufwärts-, Abwärts-, Links- und Rechtsrichtung auf der LED-Punktmatrix anzuzeigen.</p>
<p>Jetzt werden unten und oben kommentiert und bei Bedarf auskommentiert.</p>
<p>Die <strong>Wörterbuch</strong> Prüfung wird verwendet, um diese beiden Bilder anzuzeigen: ”<strong>×</strong>” und ”<strong>√</strong>”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">glyphCode</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
        <span class="n">hc595_shift</span><span class="p">(</span><span class="n">glyphCode</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">hc595_shift</span><span class="p">(</span><span class="mh">0x80</span><span class="o">&gt;&gt;</span><span class="n">i</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">RCLK</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">HIGH</span><span class="p">)</span>
        <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">RCLK</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
</pre></div>
</div>
<p>Zeigen Sie das angegebene Muster in der Punktmatrix an.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">creatGlyph</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">waypoint</span>
    <span class="k">global</span> <span class="n">stage</span>
    <span class="k">global</span> <span class="n">timerPlay</span>
    <span class="n">waypoint</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">arrow</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
    <span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;PLAY&quot;</span>
    <span class="n">timerPlay</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">timeOut</span><span class="p">)</span>
    <span class="n">timerPlay</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>Mit der Funktion <strong>createGlyph()</strong> wird zufällig eine Richtung ausgewählt (das Wortattribut eines Elements im array arrow[]: <strong>“**left</strong>”, “**right**”…). Stellen Sie die Bühne auf „PLAY“ und starten Sie eine 2-Sekunden-Weckerfunktion.</p>
<p><strong>arrow.keys():</strong> Wählen Sie die Tasten „rechts“ und „links“ im Pfeilarray.</p>
<p>l**ist(arrow.keys()):** Kombinieren Sie diese Schlüssel zu einem Array.</p>
<p><strong>random.choice(list(arrow.keys())):</strong> Wählen Sie zufällig ein Element im Array aus.</p>
<p>Das Ergebnis von <strong>waypoint=random.choice(list(arrow.keys()))</strong> sollte also „rechts“ oder „links“ sein.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">checkPoint</span><span class="p">(</span><span class="n">inputKey</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">waypoint</span>
    <span class="k">global</span> <span class="n">stage</span>
    <span class="k">global</span> <span class="n">timerCheck</span>
    <span class="k">if</span> <span class="n">inputKey</span> <span class="o">==</span> <span class="s2">&quot;empty&quot;</span> <span class="ow">or</span> <span class="n">inputKey</span> <span class="o">==</span> <span class="n">waypoint</span><span class="p">:</span>
        <span class="n">waypoint</span> <span class="o">=</span> <span class="s2">&quot;wrong&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">waypoint</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span>
    <span class="n">timerPlay</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
    <span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;CHECK&quot;</span>
    <span class="n">timerCheck</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">creatGlyph</span><span class="p">)</span>
    <span class="n">timerCheck</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>Mit checkPoint() wird der aktuelle Status der Tasteneingabe ermittelt:</p>
<p>Wenn keine Taste gedrückt wird oder die Taste in die gleiche Richtung wie der Pfeil gedrückt wird, ist der zugewiesene Wert des <strong>Wegpunkts</strong> <strong>falsch</strong> und auf der Punktmatrix wird “**x**” angezeigt.</p>
<p>Andernfalls ist der Wegpunkt richtig und “**√**” wird angezeigt.</p>
<p>Jetzt ist die Stufe <strong>CHECK</strong> und startet einen 1-Sekunden-Timer <strong>timerCheck</strong>, um die Funktion creatGlyph () in einer Sekunde aufzurufen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">timeOut</span><span class="p">():</span>
    <span class="n">checkPoint</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Setzen Sie im Funktionszeitlimit() den Parameter von checkPoint() auf „**leer**&quot;.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getKey</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">AButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">BButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">checkPoint</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">AButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">BButtonPin</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">checkPoint</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>getKey() liest den Status dieser beiden Schaltflächen, und wenn die rechte Schaltfläche gedrückt wird, ist der Parameter von checkPoint() <strong>richtig</strong>. Wenn die <strong>linke</strong> Taste gedrückt wird, bleibt der Parameter übrig.</p>
</section>
</section>
<section id="phenomenon-picture">
<h2><strong>Phänomen Bild</strong><a class="headerlink" href="#phenomenon-picture" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/image281.jpeg" class="align-center" src="_images/image281.jpeg" />
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="appendix.html" class="btn btn-neutral float-right" title="Anhang" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.1.13_game_10_second.html" class="btn btn-neutral float-left" title="3.1.13 SPIEL - 10 Sekunden" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, sunfounder

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>