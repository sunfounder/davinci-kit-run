

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.12 SPIEL – Nummer Vermutung &mdash; SunFounder Da Vinci Kit  Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="3.1.13 SPIEL - 10 Sekunden" href="3.1.13_game_10_second.html" />
    <link rel="prev" title="3.1.11 Morsekode-Generator" href="3.1.11_morse_code_generator.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Da Vinci Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="component_list.html">Komponentenliste</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Einführung</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_do_we_need.html">Was brauchen wir?</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparation.html">Vorbereitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Bibliotheken</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio_extension_board.html">GPIO-Erweiterungskarte</a></li>
<li class="toctree-l1"><a class="reference internal" href="download_the_code.html">Laden Sie die Kode herunter</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_output.html">1 Ausgabe</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_input.html">2 Eingabe</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="3_extension.html">3 Erweiterung</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.1.1_counting_device.html">3.1.1 Zählgerät</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.2_welcome.html">3.1.2 Willkommen</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.3_reversing_alarm.html">3.1.3 Alarm umkehren</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.4_smart_fan.html">3.1.4 Smart Fan</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.5_battery_indicator.html">3.1.5 Batterieanzeige</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.6_motion_control.html">3.1.6 Bewegungssteuerung</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.7_traffic_light.html">3.1.7 Ampel</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.8_overheat_monitor.html">3.1.8 Überhitzungsmonitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.9_password_lock.html">3.1.9 Passwortsperre</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.10_alarm_bell.html">3.1.10 Alarmglocke</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.11_morse_code_generator.html">3.1.11 Morsekode-Generator</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1.12 SPIEL – Nummer Vermutung</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction"><strong>Einführung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#components"><strong>Komponenten</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#schematic-diagram"><strong>Schematische Darstellung</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#experimental-procedures">Experimentelle Verfahren</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-c-language-users"><strong>Für Benutzer in C-Sprache</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-python-language-users"><strong>Für Python-Sprachbenutzer</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#phenomenon-picture"><strong>Phänomen Bild</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="3.1.13_game_10_second.html">3.1.13 SPIEL - 10 Sekunden</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.14_game_not_not.html">3.1.14 SPIEL - Nicht nicht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Anhang</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Da Vinci Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="3_extension.html">3 Erweiterung</a> &raquo;</li>
        
      <li>3.1.12 SPIEL – Nummer Vermutung</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/3.1.12_game_guess_number.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="game-guess-number">
<h1>3.1.12 SPIEL – Nummer Vermutung<a class="headerlink" href="#game-guess-number" title="Link zu dieser Überschrift">¶</a></h1>
<section id="introduction">
<h2><strong>Einführung</strong><a class="headerlink" href="#introduction" title="Link zu dieser Überschrift">¶</a></h2>
<p>Nummer Vermutung ist ein lustiges Partyspiel, bei dem Sie und Ihre Freunde abwechselnd eine Nummer eingeben (0~99). Die Reichweite wird mit der Eingabe der Nummer kleiner, bis ein Spieler das Rätsel richtig beantwortet. Dann wird der Spieler besiegt und bestraft. Wenn zum Beispiel die Glücksnummer 51 ist, die die Spieler nicht sehen können, und der Spieler ① 50 eingibt, ändert sich die Eingabeaufforderung des Nummernbereichs auf 50~99; Wenn der Spieler ② 70 eingibt, kann der Nummerbereich zwischen 50 und 70 liegen. Wenn der Spieler ③ 51 eingibt, ist dieser Spieler der Unglückliche. Hier verwenden wir die Tastatur zur Eingabe von Nummer und das LCD zur Ausgabe der Ergebnisse.</p>
</section>
<section id="components">
<h2><strong>Komponenten</strong><a class="headerlink" href="#components" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/list_GAME_Guess_Number.png" class="align-center" src="_images/list_GAME_Guess_Number.png" />
</section>
<section id="schematic-diagram">
<h2><strong>Schematische Darstellung</strong><a class="headerlink" href="#schematic-diagram" title="Link zu dieser Überschrift">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>T-Karte Name</p></td>
<td><p>physisch</p></td>
<td><p>wiringPi</p></td>
<td><p>BCM</p></td>
</tr>
<tr class="row-even"><td><p>GPIO18</p></td>
<td><p>Pin 12</p></td>
<td><p>1</p></td>
<td><p>18</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO23</p></td>
<td><p>Pin 16</p></td>
<td><p>4</p></td>
<td><p>23</p></td>
</tr>
<tr class="row-even"><td><p>GPIO24</p></td>
<td><p>Pin 18</p></td>
<td><p>5</p></td>
<td><p>24</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO25</p></td>
<td><p>Pin 22</p></td>
<td><p>6</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-even"><td><p>SPIMOSI</p></td>
<td><p>Pin 19</p></td>
<td><p>12</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO22</p></td>
<td><p>Pin 15</p></td>
<td><p>3</p></td>
<td><p>22</p></td>
</tr>
<tr class="row-even"><td><p>GPIO27</p></td>
<td><p>Pin 13</p></td>
<td><p>2</p></td>
<td><p>27</p></td>
</tr>
<tr class="row-odd"><td><p>GPIO17</p></td>
<td><p>Pin 11</p></td>
<td><p>0</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-even"><td><p>SDA1</p></td>
<td><p>Pin 3</p></td>
<td><p>SDA1(8)</p></td>
<td><p>SDA1(2)</p></td>
</tr>
<tr class="row-odd"><td><p>SCL1</p></td>
<td><p>Pin 5</p></td>
<td><p>SCL1(9)</p></td>
<td><p>SDA1(3)</p></td>
</tr>
</tbody>
</table>
<img alt="_images/Schematic_three_one12.png" class="align-center" src="_images/Schematic_three_one12.png" />
</section>
<section id="experimental-procedures">
<h2>Experimentelle Verfahren<a class="headerlink" href="#experimental-procedures" title="Link zu dieser Überschrift">¶</a></h2>
<p><strong>Schritt 1:</strong> Bauen Sie die Schaltung auf.</p>
<a class="reference internal image-reference" href="_images/image273.png"><img alt="Guess Number_bb" src="_images/image273.png" style="width: 6.71458in; height: 6.64097in;" /></a>
<p><strong>Schritt 2:</strong> I2C einrichten (siehe Anhang. Wenn Sie I2C eingestellt haben, überspringen Sie diesen Schritt.)</p>
<section id="for-c-language-users">
<h3><strong>Für Benutzer in C-Sprache</strong><a class="headerlink" href="#for-c-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 3:</strong> Verzeichnis wechseln.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="mf">3.1</span><span class="o">.</span><span class="mi">12</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 4:</strong> Kompilieren.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">12</span><span class="n">_GAME_GuessNumber</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">lwiringPi</span>
</pre></div>
</div>
<p><strong>Schritt 5:</strong> Ausführen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Nachdem das Programm ausgeführt wurde, wird die erste Seite auf dem LCD angezeigt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Welcome!
Press A to go!
</pre></div>
</div>
<p>Drücken Sie ‚A‘ und das Spiel startet und die Spieleseite erscheint auf dem LCD.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Enter number:
0 ‹point‹ 99
</pre></div>
</div>
<p>Zu Beginn des Spiels wird eine Zufallsnummer ‘<strong>Punkt</strong>’ erzeugt, die jedoch nicht auf dem LCD angezeigt wird. Sie müssen sie nur erraten. Die eingegebene Nummer wird am Ende der ersten Zeile angezeigt, bis die endgültige Berechnung abgeschlossen ist. (Drücken Sie ‚D‘, um den Vergleich zu starten. Wenn die Eingangsnummer größer als <strong>10</strong> ist, wird der automatische Vergleich gestartet.)</p>
<p>Der Nummernkreis von ‚Punkt‘ wird in der zweiten Zeile angezeigt. Und Sie müssen die Nummer innerhalb des Bereichs eingeben. Wenn Sie eine Nummer eingeben, wird der Bereich enger. Wenn Sie die Glücksnummer glücklicherweise oder unglücklicherweise erhalten haben, wird „Sie haben sie!“ angezeigt.</p>
<p><strong>Kode Erklärung</strong></p>
<p>Am Anfang des Codes stehen die Funktionsfunktionen der <strong>Tastatur</strong> und des <strong>I2C LCD1602</strong>. Weitere Informationen hierzu finden Sie in den Tasten <strong>1.1.7 I2C LCD1602</strong> und <strong>2.1.5 Tastatur.</strong></p>
<p>Hier müssen wir Folgendes wissen:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/****************************************/</span>
<span class="c1">//Start from here</span>
<span class="cm">/****************************************/</span>
<span class="kt">void</span> <span class="nf">init</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="n">fd</span> <span class="o">=</span> <span class="n">wiringPiI2CSetup</span><span class="p">(</span><span class="n">LCDAddr</span><span class="p">);</span>
    <span class="n">lcd_init</span><span class="p">();</span>
    <span class="n">lcd_clear</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span> <span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">4</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">pinMode</span><span class="p">(</span><span class="n">rowPins</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">OUTPUT</span><span class="p">);</span>
        <span class="n">pinMode</span><span class="p">(</span><span class="n">colPins</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">INPUT</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">lcd_clear</span><span class="p">();</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;Welcome!&quot;</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Press A to go!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Diese Funktion wird verwendet, um zunächst <strong>I2C LCD1602</strong> und <strong>Tastatur</strong> zu definieren und „Willkommen!“ und „Drücken Sie A, um zu gehen!“ anzuzeigen.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">init_new_value</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="n">srand</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
    <span class="n">pointValue</span> <span class="o">=</span> <span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">100</span><span class="p">;</span>
    <span class="n">upper</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>
    <span class="n">lower</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;point is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">pointValue</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Die Funktion erzeugt die Zufallsnummer ‘<strong>Punkt</strong>’ und setzt den Bereichshinweis des Punktes zurück.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="nf">detect_point</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="n">pointValue</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">){</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">count</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">&lt;</span> <span class="n">pointValue</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="n">lower</span><span class="p">){</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">count</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">=</span> <span class="n">pointValue</span><span class="p">){</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>detect_point() vergleicht die eingegebene Nummer mit dem erzeugten „Punkt“. Wenn das Vergleichsergebnis ist, dass sie nicht gleich sind, weist <strong>oberen</strong> und <strong>unteren</strong> Werten zu und gibt ‘<strong>0</strong>’ zurück. Andernfalls wenn das Ergebnis gleich sind, gibt es ‘<strong>0</strong>’ zurück.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">lcd_show_input</span><span class="p">(</span><span class="kt">bool</span> <span class="n">result</span><span class="p">){</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
    <span class="n">str</span> <span class="o">=</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="o">*</span><span class="mi">3</span><span class="p">);</span>
    <span class="n">lcd_clear</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
        <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;You&#39;ve got it!&quot;</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
        <span class="n">init_new_value</span><span class="p">();</span>
        <span class="n">lcd_show_input</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;Enter number:&quot;</span><span class="p">);</span>
    <span class="n">Int2Str</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">count</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
    <span class="n">Int2Str</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">lower</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;&lt;Point&lt;&quot;</span><span class="p">);</span>
    <span class="n">Int2Str</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">upper</span><span class="p">);</span>
    <span class="n">write</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Diese Funktion dient zum Anzeigen der Spieleseite. Beachten Sie die Funktion <strong>Int2Str(str,count)</strong>, die diese Variablen <strong>count</strong>, <strong>lower</strong> und <strong>superior</strong> von <strong>Integer</strong> in <strong>Character String</strong> konvertiert, um die korrekte Anzeige von <strong>lcd</strong> zu gewährleisten.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">pressed_keys</span><span class="p">[</span><span class="n">BUTTON_NUM</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">last_key_pressed</span><span class="p">[</span><span class="n">BUTTON_NUM</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span><span class="n">wiringPiSetup</span><span class="p">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span> <span class="c1">//when initialize wiring failed,print messageto screen</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;setup wiringPi failed !&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">init</span><span class="p">();</span>
    <span class="n">init_new_value</span><span class="p">();</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
        <span class="n">keyRead</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">);</span>
        <span class="kt">bool</span> <span class="n">comp</span> <span class="o">=</span> <span class="n">keyCompare</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">,</span> <span class="n">last_key_pressed</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">comp</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
                <span class="kt">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;A&#39;</span><span class="p">){</span>
                    <span class="n">init_new_value</span><span class="p">();</span>
                    <span class="n">lcd_show_input</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;D&#39;</span><span class="p">){</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">detect_point</span><span class="p">();</span>
                    <span class="n">lcd_show_input</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span><span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">){</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="p">(</span><span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">48</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">count</span><span class="o">&gt;=</span><span class="mi">10</span><span class="p">){</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">detect_point</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="n">lcd_show_input</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">keyCopy</span><span class="p">(</span><span class="n">last_key_pressed</span><span class="p">,</span> <span class="n">pressed_keys</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Main () enthält den gesamten Prozess des Programms, wie unten gezeigt:</p>
<ol class="arabic simple">
<li><p>Initialisieren Sie <strong>I2C LCD1602</strong> und <strong>Tastatur</strong>.</p></li>
<li><p>Verwenden Sie <strong>init_new_value()</strong>, um eine Zufallsnummer <strong>0-99</strong> zu erstellen.</p></li>
<li><p>Beurteilen Sie, ob die Taste gedrückt wurde, und lassen Sie die Taste ablesen.</p></li>
<li><p>Wenn die Taste ‘<strong>A</strong>’ gedrückt wird, erscheint eine Zufallsnummer <strong>0-99</strong> und das Spiel beginnt.</p></li>
<li><p>Wenn festgestellt wird, dass die Taste ‘<strong>D</strong>’ gedrückt wurde, geht das Programm in die Ergebnisbeurteilung ein und zeigt das Ergebnis auf dem LCD an. Dieser Schritt hilft Ihnen, das Ergebnis auch zu beurteilen, wenn Sie nur eine Nummer und dann die Taste ‘<strong>D</strong>’ drücken.</p></li>
<li><p>Wenn die Taste <strong>0-9</strong> gedrückt wird, wird der <strong>Zählwert</strong> geändert. Wenn die <strong>Anzahl</strong> größer als <strong>10</strong> ist, beginnt das Urteil.</p></li>
<li><p>Die Änderungen des Spiels und seiner Werte werden auf dem <strong>LCD1602</strong> angezeigt.</p></li>
</ol>
</section>
<section id="for-python-language-users">
<h3><strong>Für Python-Sprachbenutzer</strong><a class="headerlink" href="#for-python-language-users" title="Link zu dieser Überschrift">¶</a></h3>
<p><strong>Schritt 3:</strong> Verzeichnis wechseln.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">davinci</span><span class="o">-</span><span class="n">kit</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="n">python</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Schritt 4:</strong> Ausführen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python3</span> <span class="mf">3.1</span><span class="o">.</span><span class="mi">12</span><span class="n">_GAME_GuessNumber</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Nachdem das Programm ausgeführt wurde, wird die erste Seite auf dem LCD angezeigt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Welcome!
Press A to go!
</pre></div>
</div>
<p>Drücken Sie ‚A‘ und das Spiel startet und die Spieleseite erscheint auf dem LCD.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Enter number:
0 ‹point‹ 99
</pre></div>
</div>
<p>Zu Beginn des Spiels wird eine Zufallsnummer ‘<strong>Punkt</strong>’ erzeugt, die jedoch nicht auf dem LCD angezeigt wird. Sie müssen sie nur erraten. Die eingegebene Nummer wird am Ende der ersten Zeile angezeigt, bis die endgültige Berechnung abgeschlossen ist. (Drücken Sie ‚D‘, um den Vergleich zu starten. Wenn die Eingangsnummer größer als <strong>10</strong> ist, wird der automatische Vergleich gestartet.)</p>
<p>Der Nummernkreis von ‚Punkt‘ wird in der zweiten Zeile angezeigt. Und Sie müssen die Nummer innerhalb des Bereichs eingeben. Wenn Sie eine Nummer eingeben, wird der Bereich enger. Wenn Sie die Glücksnummer glücklicherweise oder unglücklicherweise erhalten haben, wird „Sie haben sie!“ angezeigt.</p>
<p><strong>Kode Erklärung</strong></p>
<p>Am Anfang des Codes stehen die Funktionsfunktionen der <strong>Tastatur</strong> und des <strong>I2C LCD1602</strong>. Weitere Informationen hierzu finden Sie in den Tasten <strong>1.1.7 I2C LCD1602</strong> und <strong>2.1.5 Tastatur.</strong></p>
<p>Hier müssen wir Folgendes wissen:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init_new_value</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">pointValue</span><span class="p">,</span><span class="n">upper</span><span class="p">,</span><span class="n">count</span><span class="p">,</span><span class="n">lower</span>
    <span class="n">pointValue</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">99</span><span class="p">)</span>
    <span class="n">upper</span> <span class="o">=</span> <span class="mi">99</span>
    <span class="n">lower</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;point is </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">pointValue</span><span class="p">))</span>
</pre></div>
</div>
<p>Die Funktion erzeugt die Zufallsnummer ‘<strong>Punkt</strong>’ und setzt den Bereichshinweis des Punktes zurück.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">detect_point</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">count</span><span class="p">,</span><span class="n">upper</span><span class="p">,</span><span class="n">lower</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">pointValue</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">count</span>
    <span class="k">elif</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">pointValue</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">lower</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">count</span>
    <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="n">pointValue</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</div>
<p>detect_point() vergleicht die eingegebene Nummer (<strong>Anzahl</strong>) mit dem erzeugten „**Punkt**&quot;. Wenn das Vergleichsergebnis ist, dass sie nicht gleich sind, weist <strong>oberen</strong> und <strong>unteren</strong> Werten zu und gibt ‘<strong>0</strong>’ zurück. Andernfalls wenn das Ergebnis gleich sind, gibt es ‘<strong>0</strong>’ zurück.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lcd_show_input</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;You have got it!&#39;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">init_new_value</span><span class="p">()</span>
        <span class="n">lcd_show_input</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;Enter number:&#39;</span><span class="p">)</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">lower</span><span class="p">))</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39; &lt; Point &lt; &#39;</span><span class="p">)</span>
    <span class="n">LCD1602</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">upper</span><span class="p">))</span>
</pre></div>
</div>
<p>Diese Funktion dient zum Anzeigen der Spieleseite.</p>
<p>str(count): Da <strong>write()</strong> nur den Datentyp - <strong>Zeichenfolge</strong> - unterstützen kann, wird <strong>str ()</strong> benötigt, um die <strong>Nummer</strong> in eine <strong>Zeichenfolge</strong> umzuwandeln.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">loop</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">keypad</span><span class="p">,</span> <span class="n">last_key_pressed</span><span class="p">,</span><span class="n">count</span>
    <span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">pressed_keys</span> <span class="o">=</span> <span class="n">keypad</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">last_key_pressed</span> <span class="o">!=</span> <span class="n">pressed_keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pressed_keys</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]:</span>
                <span class="n">init_new_value</span><span class="p">()</span>
                <span class="n">lcd_show_input</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pressed_keys</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">]:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">detect_point</span><span class="p">()</span>
                <span class="n">lcd_show_input</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">([</span><span class="s2">&quot;A&quot;</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">,</span><span class="s2">&quot;#&quot;</span><span class="p">,</span><span class="s2">&quot;*&quot;</span><span class="p">]):</span>
                    <span class="k">continue</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">*</span> <span class="mi">10</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">detect_point</span><span class="p">()</span>
                <span class="n">lcd_show_input</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">pressed_keys</span><span class="p">)</span>
        <span class="n">last_key_pressed</span> <span class="o">=</span> <span class="n">pressed_keys</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>Main () enthält den gesamten Prozess des Programms, wie unten gezeigt:</p>
<ol class="arabic simple">
<li><p>Initialisieren Sie <strong>I2C LCD1602</strong> und <strong>Tastatur</strong>.</p></li>
<li><p>Beurteilen Sie, ob die Taste gedrückt wurde, und lassen Sie die Taste ablesen.</p></li>
<li><p>Wenn die Taste ‘<strong>A</strong>’ gedrückt wird, erscheint eine Zufallsnummer <strong>0-99</strong> und das Spiel beginnt.</p></li>
<li><p>Wenn festgestellt wird, dass die Taste ‘<strong>D</strong>’ gedrückt wurde, geht das Programm in die Ergebnisbeurteilung ein.</p></li>
<li><p>Wenn die Taste <strong>0-9</strong> gedrückt wird, wird der <strong>Zählwert</strong> geändert. Wenn die <strong>Anzahl</strong> größer als <strong>10</strong> ist, beginnt das Urteil.</p></li>
<li><p>Die Änderungen des Spiels und seiner Werte werden auf dem <strong>LCD1602</strong> angezeigt.</p></li>
</ol>
</section>
</section>
<section id="phenomenon-picture">
<h2><strong>Phänomen Bild</strong><a class="headerlink" href="#phenomenon-picture" title="Link zu dieser Überschrift">¶</a></h2>
<img alt="_images/image274.jpeg" class="align-center" src="_images/image274.jpeg" />
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3.1.13_game_10_second.html" class="btn btn-neutral float-right" title="3.1.13 SPIEL - 10 Sekunden" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.1.11_morse_code_generator.html" class="btn btn-neutral float-left" title="3.1.11 Morsekode-Generator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, sunfounder

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>